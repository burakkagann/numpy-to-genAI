
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.1.1 - Rotation &#8212; Pixels to GenAI</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/github-icon.css?v=0979adda" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/footer.css?v=22df2544" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/content.css?v=ad41e33b" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/scroll-progress.css?v=46bcc4b9" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../../../_static/documentation_options.js?v=60dbed4a"></script>
    <script src="../../../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/Module_03_transformations_effects/3.1_geometric_transformations/3.1.1_rotation/rotate/README';</script>
    <script src="../../../../../_static/github-icon.js?v=54752c43"></script>
    <script src="../../../../../_static/scroll-progress.js?v=9aba87dc"></script>
    <link rel="icon" href="../../../../../_static/favicon-64x64.png"/>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="3.1.2 - Affine Transformations" href="../../3.1.2_affine_transformations/README.html" />
    <link rel="prev" title="2.3.3 - Harmonograph Simulation" href="../../../../Module_02_geometry_mathematics/2.3_mathematical_art/2.3.3_harmonograph_simulation/README.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../../../_static/favicon-192x192.png" class="logo__image only-light" alt=""/>
    <img src="../../../../../_static/favicon-192x192.png" class="logo__image only-dark pst-js-only" alt=""/>
  
  
    <p class="title logo__title">Pixels to GenAI</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/burakkagann/numpy-to-genAI" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/burakkagann/numpy-to-genAI" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"></div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">3.1.1 - Rotation</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="rotation">
<span id="module-3-1-1-rotation"></span><h1>3.1.1 - Rotation<a class="headerlink" href="#rotation" title="Link to this heading">#</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Duration<span class="colon">:</span></dt>
<dd class="field-odd"><p>18 minutes</p>
</dd>
<dt class="field-even">Level<span class="colon">:</span></dt>
<dd class="field-even"><p>Beginner</p>
</dd>
<dt class="field-odd">Prerequisites<span class="colon">:</span></dt>
<dd class="field-odd"><p>Module 1 (Array Basics), Module 2.2 (Coordinate Systems)</p>
</dd>
</dl>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>Rotation is one of the fundamental geometric transformations in image processing
and generative art. In this exercise, you will discover how to rotate images and
shapes using NumPy arrays and the SciPy library. By understanding rotation, you
unlock the ability to create dynamic compositions, radial patterns, and
animations that bring static images to life.</p>
<p><strong>Learning Objectives</strong></p>
<p>By the end of this exercise, you will be able to:</p>
<ul class="simple">
<li><p>Rotate images and shapes by any angle using <code class="docutils literal notranslate"><span class="pre">scipy.ndimage.rotate()</span></code></p></li>
<li><p>Understand how the center of rotation affects the transformation result</p></li>
<li><p>Apply interpolation concepts to handle pixel resampling during rotation</p></li>
<li><p>Create artistic patterns by combining multiple rotated copies of a shape</p></li>
</ul>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading">#</a></h2>
<p>Let us begin by seeing rotation in action. Run the following code to create
a simple shape and rotate it by 45 degrees:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">simple_rotation.py</span><a class="headerlink" href="#id2" title="Link to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy</span><span class="w"> </span><span class="kn">import</span> <span class="n">ndimage</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c1"># Step 1: Create a simple colored rectangle on a dark background</span>
<span class="linenos"> 6</span><span class="n">canvas_size</span> <span class="o">=</span> <span class="mi">400</span>
<span class="linenos"> 7</span><span class="n">image</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">canvas_size</span><span class="p">,</span> <span class="n">canvas_size</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># Draw a cyan rectangle in the center</span>
<span class="linenos">10</span><span class="n">rect_top</span><span class="p">,</span> <span class="n">rect_bottom</span> <span class="o">=</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">250</span>
<span class="linenos">11</span><span class="n">rect_left</span><span class="p">,</span> <span class="n">rect_right</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">300</span>
<span class="linenos">12</span><span class="n">image</span><span class="p">[</span><span class="n">rect_top</span><span class="p">:</span><span class="n">rect_bottom</span><span class="p">,</span> <span class="n">rect_left</span><span class="p">:</span><span class="n">rect_right</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">]</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="c1"># Step 2: Rotate the image by 45 degrees</span>
<span class="linenos">15</span><span class="n">rotation_angle</span> <span class="o">=</span> <span class="mi">45</span>
<span class="linenos">16</span><span class="n">rotated_image</span> <span class="o">=</span> <span class="n">ndimage</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">rotation_angle</span><span class="p">,</span> <span class="n">reshape</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">cval</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="c1"># Step 3: Create side-by-side comparison</span>
<span class="linenos">19</span><span class="n">comparison</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">canvas_size</span><span class="p">,</span> <span class="n">canvas_size</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="linenos">20</span><span class="n">comparison</span><span class="p">[:,</span> <span class="p">:</span><span class="n">canvas_size</span><span class="p">]</span> <span class="o">=</span> <span class="n">image</span>
<span class="linenos">21</span><span class="n">comparison</span><span class="p">[:,</span> <span class="n">canvas_size</span> <span class="o">+</span> <span class="mi">20</span><span class="p">:]</span> <span class="o">=</span> <span class="n">rotated_image</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="c1"># Step 4: Save the result</span>
<span class="linenos">24</span><span class="n">output</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">comparison</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span>
<span class="linenos">25</span><span class="n">output</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;simple_rotation.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../../../../../_images/simple_rotation.png"><img alt="Side-by-side comparison showing original rectangle on left and 45-degree rotated version on right" src="../../../../../_images/simple_rotation.png" style="width: 600px;" />
</a>
<figcaption>
<p><span class="caption-text">Left: Original rectangle. Right: The same rectangle rotated 45 degrees around the image center.</span><a class="headerlink" href="#id3" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Notice how the rectangle appears tilted in the rotated version. The rotation
happens around the center of the image, and pixels that would fall outside the
canvas boundaries are clipped.</p>
</section>
<section id="core-concepts">
<h2>Core Concepts<a class="headerlink" href="#core-concepts" title="Link to this heading">#</a></h2>
<section id="understanding-image-rotation">
<h3>Understanding Image Rotation<a class="headerlink" href="#understanding-image-rotation" title="Link to this heading">#</a></h3>
<p>When we rotate an image, each pixel moves to a new location based on a
mathematical transformation. The rotation preserves the distances between
pixels (it is a rigid transformation) but changes their angular positions
relative to a center point.</p>
<p>The key parameters that control rotation are:</p>
<ol class="arabic simple">
<li><p><strong>Angle</strong>: How many degrees to rotate (positive = counter-clockwise)</p></li>
<li><p><strong>Center</strong>: The pivot point around which rotation occurs</p></li>
<li><p><strong>Interpolation</strong>: How to handle pixels that land between grid positions</p></li>
<li><p><strong>Output size</strong>: Whether to expand the canvas to fit the rotated content</p></li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>In NumPy and SciPy, <strong>positive angles rotate counter-clockwise</strong>, following
the mathematical convention. This matches the behavior you learned in
Module 2 with coordinate systems.</p>
</div>
</section>
<section id="the-rotation-matrix">
<h3>The Rotation Matrix<a class="headerlink" href="#the-rotation-matrix" title="Link to this heading">#</a></h3>
<p>Behind the scenes, rotation is performed using a 2D rotation matrix. For an
angle <span class="math notranslate nohighlight">\(\theta\)</span>, the rotation matrix is:</p>
<div class="math notranslate nohighlight">
\[\begin{split}R(\theta) = \begin{bmatrix}
\cos\theta &amp; -\sin\theta \\
\sin\theta &amp; \cos\theta
\end{bmatrix}\end{split}\]</div>
<p>Each pixel at position <span class="math notranslate nohighlight">\((x, y)\)</span> is transformed to a new position
<span class="math notranslate nohighlight">\((x', y')\)</span> by multiplying with this matrix. You do not need to implement
this yourself - <code class="docutils literal notranslate"><span class="pre">scipy.ndimage.rotate()</span></code> handles it automatically.</p>
<div class="admonition-did-you-know admonition">
<p class="admonition-title">Did You Know?</p>
<p>The rotation matrix is an example of an <em>orthogonal matrix</em>, meaning its
inverse equals its transpose. This mathematical property ensures that
rotations preserve lengths and angles - your shapes will not become
distorted when rotated <a class="reference internal" href="../../../3.4_signal_processing/3.4.3_contour_lines/contour/README.html#gonzalez2018" id="id1"><span>[Gonzalez2018]</span></a>.</p>
</div>
</section>
<section id="center-of-rotation-and-interpolation">
<h3>Center of Rotation and Interpolation<a class="headerlink" href="#center-of-rotation-and-interpolation" title="Link to this heading">#</a></h3>
<p>The center of rotation (pivot point) determines where the rotation occurs.
By default, <code class="docutils literal notranslate"><span class="pre">scipy.ndimage.rotate()</span></code> uses the image center as the pivot.</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../../../../../_images/rotation_center_diagram.png"><img alt="Diagram comparing rotation around image center versus rotation around a corner point" src="../../../../../_images/rotation_center_diagram.png" style="width: 700px;" />
</a>
<figcaption>
<p><span class="caption-text">Left: Rotation around the image center keeps the shape in place.
Right: Rotation around a corner causes the shape to orbit around the pivot.</span><a class="headerlink" href="#id4" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>When pixels are rotated to non-integer positions (which happens for most angles),
<strong>interpolation</strong> is used to compute the new pixel values. The <code class="docutils literal notranslate"><span class="pre">order</span></code>
parameter controls interpolation quality:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">order=0</span></code>: Nearest neighbor (fast but blocky)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">order=1</span></code>: Bilinear interpolation (default, good balance)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">order=3</span></code>: Cubic interpolation (smoother but slower)</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">reshape</span></code> parameter is also important:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">reshape=True</span></code>: Expands output to contain all rotated pixels (may change image size)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reshape=False</span></code>: Keeps original size (clips pixels that fall outside)</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Comparing reshape options</span><a class="headerlink" href="#id5" title="Link to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reshape=False: same size output, content may be clipped</span>
<span class="n">rotated_clip</span> <span class="o">=</span> <span class="n">ndimage</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="n">reshape</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rotated_clip</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># Same as original</span>

<span class="c1"># Reshape=True: larger output to fit all content</span>
<span class="n">rotated_full</span> <span class="o">=</span> <span class="n">ndimage</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="n">reshape</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rotated_full</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>  <span class="c1"># Larger than original</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="hands-on-exercises">
<h2>Hands-On Exercises<a class="headerlink" href="#hands-on-exercises" title="Link to this heading">#</a></h2>
<section id="exercise-1-execute-and-explore">
<h3>Exercise 1: Execute and Explore<a class="headerlink" href="#exercise-1-execute-and-explore" title="Link to this heading">#</a></h3>
<p>Run the artistic pattern script to see how multiple rotations create
generative art:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>rotation_pattern.py
</pre></div>
</div>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../../../../../_images/rotation_pattern.png"><img alt="Circular pattern created by overlapping 18 rotated rectangles with additive blending" src="../../../../../_images/rotation_pattern.png" style="width: 450px;" />
</a>
<figcaption>
<p><span class="caption-text">A fan-like pattern created by rotating a rectangle 18 times and overlaying
the results with additive blending.</span><a class="headerlink" href="#id6" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p><strong>Reflection Questions</strong></p>
<div class="admonition-question-1 admonition">
<p class="admonition-title">Question 1</p>
<p>What visual effect is created when the rotated shapes overlap?</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Answer</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The overlapping regions become brighter due to <strong>additive blending</strong>.
Each rotation adds its color values to the canvas, so areas where
multiple rotations overlap accumulate higher values (up to 255).</p>
</div>
</details></div>
<div class="admonition-question-2 admonition">
<p class="admonition-title">Question 2</p>
<p>How does the number of rotations affect the pattern density?</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Answer</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">More rotations create a denser, more filled pattern. With 18 rotations
spread across 180 degrees, each step is 10 degrees apart. Using 36
rotations would make it 5 degrees apart, creating a smoother fan.</p>
</div>
</details></div>
<div class="admonition-question-3 admonition">
<p class="admonition-title">Question 3</p>
<p>Why does the pattern form a circular/radial shape?</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Answer</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The rotation happens around the image center. Since the rectangle is
offset from center, it sweeps a circular arc as it rotates, creating
the radial fan pattern.</p>
</div>
</details></div>
</section>
<section id="exercise-2-modify-parameters">
<h3>Exercise 2: Modify Parameters<a class="headerlink" href="#exercise-2-modify-parameters" title="Link to this heading">#</a></h3>
<p>Open <code class="docutils literal notranslate"><span class="pre">rotation_pattern.py</span></code> and make the following modifications:</p>
<p><strong>Goal 1</strong>: Change the pattern to use only 6 rotations (more sparse)</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Hint</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Change <code class="docutils literal notranslate"><span class="pre">number_of_rotations</span> <span class="pre">=</span> <span class="pre">18</span></code> to <code class="docutils literal notranslate"><span class="pre">number_of_rotations</span> <span class="pre">=</span> <span class="pre">6</span></code>.
This will create wider gaps between each rotated copy.</p>
</div>
</details><p><strong>Goal 2</strong>: Create a warm color palette (oranges and reds instead of cyan)</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Hint</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Find the line where the shape color is set to <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">180,</span> <span class="pre">220]</span></code> (cyan)
and change it to <code class="docutils literal notranslate"><span class="pre">[255,</span> <span class="pre">120,</span> <span class="pre">50]</span></code> for an orange color.</p>
</div>
</details><p><strong>Goal 3</strong>: Make the pattern fill a full 360 degrees instead of 180</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Hint</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Change <code class="docutils literal notranslate"><span class="pre">angle_step</span> <span class="pre">=</span> <span class="pre">180</span> <span class="pre">/</span> <span class="pre">number_of_rotations</span></code> to
<code class="docutils literal notranslate"><span class="pre">angle_step</span> <span class="pre">=</span> <span class="pre">360</span> <span class="pre">/</span> <span class="pre">number_of_rotations</span></code> to spread rotations
across the full circle.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Complete Solution</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy</span><span class="w"> </span><span class="kn">import</span> <span class="n">ndimage</span>
<span class="linenos"> 3</span><span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">canvas_size</span> <span class="o">=</span> <span class="mi">500</span>
<span class="linenos"> 6</span><span class="n">number_of_rotations</span> <span class="o">=</span> <span class="mi">6</span>  <span class="c1"># Changed from 18</span>
<span class="linenos"> 7</span><span class="n">angle_step</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">/</span> <span class="n">number_of_rotations</span>  <span class="c1"># Changed to full circle</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">canvas_size</span><span class="p">,</span> <span class="n">canvas_size</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="n">shape</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">canvas_size</span><span class="p">,</span> <span class="n">canvas_size</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="linenos">12</span><span class="n">rect_top</span><span class="p">,</span> <span class="n">rect_bottom</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span>
<span class="linenos">13</span><span class="n">rect_left</span><span class="p">,</span> <span class="n">rect_right</span> <span class="o">=</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">450</span>
<span class="linenos">14</span><span class="n">shape</span><span class="p">[</span><span class="n">rect_top</span><span class="p">:</span><span class="n">rect_bottom</span><span class="p">,</span> <span class="n">rect_left</span><span class="p">:</span><span class="n">rect_right</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>  <span class="c1"># Orange</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_rotations</span><span class="p">):</span>
<span class="linenos">17</span>    <span class="n">rotation_angle</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">angle_step</span>
<span class="linenos">18</span>    <span class="n">rotated_shape</span> <span class="o">=</span> <span class="n">ndimage</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">rotation_angle</span><span class="p">,</span> <span class="n">reshape</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">cval</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">19</span>    <span class="n">contribution</span> <span class="o">=</span> <span class="p">(</span><span class="n">rotated_shape</span> <span class="o">*</span> <span class="mf">0.4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="linenos">20</span>    <span class="n">canvas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">canvas</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span> <span class="o">+</span> <span class="n">contribution</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="n">output</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span>
<span class="linenos">23</span><span class="n">output</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;modified_pattern.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>
<section id="exercise-3-build-your-own-rotation-tool">
<h3>Exercise 3: Build Your Own Rotation Tool<a class="headerlink" href="#exercise-3-build-your-own-rotation-tool" title="Link to this heading">#</a></h3>
<p>Create a rotation tool from scratch that rotates a shape onto a colored
background. Your tool should:</p>
<ol class="arabic simple">
<li><p>Create a canvas filled with a background color</p></li>
<li><p>Draw a colored shape on a separate layer</p></li>
<li><p>Rotate the shape by a specified angle</p></li>
<li><p>Composite the rotated shape onto the background</p></li>
</ol>
<p><strong>Requirements</strong></p>
<ul class="simple">
<li><p>Use a dark blue background: <code class="docutils literal notranslate"><span class="pre">[30,</span> <span class="pre">30,</span> <span class="pre">50]</span></code></p></li>
<li><p>Create an orange rectangle: <code class="docutils literal notranslate"><span class="pre">[255,</span> <span class="pre">150,</span> <span class="pre">50]</span></code></p></li>
<li><p>Rotate by 30 degrees</p></li>
<li><p>Save as <code class="docutils literal notranslate"><span class="pre">my_rotation.png</span></code></p></li>
</ul>
<p><strong>Starter Code</strong></p>
<p>Use <code class="docutils literal notranslate"><span class="pre">rotation_starter.py</span></code> as your starting point. Fill in the TODO sections.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Hint 1: Filling the background</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">To fill the entire canvas with a background color, use array broadcasting:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">canvas</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">background_color</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Hint 2: Creating a mask for compositing</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">After rotating, you need to overlay non-black pixels onto the background.
Create a mask that identifies where the rotated shape has color:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">rotated_shape</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">canvas</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">=</span> <span class="n">rotated_shape</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Complete Solution</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy</span><span class="w"> </span><span class="kn">import</span> <span class="n">ndimage</span>
<span class="linenos"> 2</span><span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># ============================================</span>
<span class="linenos"> 5</span><span class="c1"># CONFIGURATION - Modify these parameters</span>
<span class="linenos"> 6</span><span class="c1"># ============================================</span>
<span class="linenos"> 7</span><span class="n">canvas_size</span> <span class="o">=</span> <span class="mi">400</span>
<span class="linenos"> 8</span><span class="n">rotation_angle</span> <span class="o">=</span> <span class="mi">30</span>  <span class="c1"># Try different angles: 45, 90, 135, etc.</span>
<span class="linenos"> 9</span><span class="n">background_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>  <span class="c1"># Dark blue background [R, G, B]</span>
<span class="linenos">10</span><span class="n">shape_color</span> <span class="o">=</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>    <span class="c1"># Orange shape [R, G, B]</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="c1"># ============================================</span>
<span class="linenos">13</span><span class="c1"># Step 1: Create canvas with background color</span>
<span class="linenos">14</span><span class="c1"># ============================================</span>
<span class="linenos">15</span><span class="c1"># Create a canvas array and fill it with the background color</span>
<span class="linenos">16</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">canvas_size</span><span class="p">,</span> <span class="n">canvas_size</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="linenos">17</span><span class="n">canvas</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">background_color</span>  <span class="c1"># Fill entire canvas with background</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="c1"># ============================================</span>
<span class="linenos">20</span><span class="c1"># Step 2: Create a shape to rotate</span>
<span class="linenos">21</span><span class="c1"># ============================================</span>
<span class="linenos">22</span><span class="c1"># Create a separate layer for the shape (on black background for easy masking)</span>
<span class="linenos">23</span><span class="n">shape_layer</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">canvas_size</span><span class="p">,</span> <span class="n">canvas_size</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="c1"># Draw a rectangle in the center-right area</span>
<span class="linenos">26</span><span class="c1"># This offset position will show rotation clearly</span>
<span class="linenos">27</span><span class="n">rect_top</span> <span class="o">=</span> <span class="mi">150</span>
<span class="linenos">28</span><span class="n">rect_bottom</span> <span class="o">=</span> <span class="mi">250</span>
<span class="linenos">29</span><span class="n">rect_left</span> <span class="o">=</span> <span class="mi">180</span>
<span class="linenos">30</span><span class="n">rect_right</span> <span class="o">=</span> <span class="mi">350</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="n">shape_layer</span><span class="p">[</span><span class="n">rect_top</span><span class="p">:</span><span class="n">rect_bottom</span><span class="p">,</span> <span class="n">rect_left</span><span class="p">:</span><span class="n">rect_right</span><span class="p">]</span> <span class="o">=</span> <span class="n">shape_color</span>
<span class="linenos">33</span>
<span class="linenos">34</span><span class="c1"># ============================================</span>
<span class="linenos">35</span><span class="c1"># Step 3: Rotate the shape</span>
<span class="linenos">36</span><span class="c1"># ============================================</span>
<span class="linenos">37</span><span class="c1"># Use scipy.ndimage.rotate() to rotate the shape layer</span>
<span class="linenos">38</span><span class="c1"># reshape=False keeps the output size the same as input</span>
<span class="linenos">39</span><span class="c1"># mode=&#39;constant&#39; fills empty areas with cval (0 = black)</span>
<span class="linenos">40</span><span class="n">rotated_shape</span> <span class="o">=</span> <span class="n">ndimage</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span>
<span class="linenos">41</span>    <span class="n">shape_layer</span><span class="p">,</span>
<span class="linenos">42</span>    <span class="n">rotation_angle</span><span class="p">,</span>
<span class="linenos">43</span>    <span class="n">reshape</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="linenos">44</span>    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span>
<span class="linenos">45</span>    <span class="n">cval</span><span class="o">=</span><span class="mi">0</span>
<span class="linenos">46</span><span class="p">)</span>
<span class="linenos">47</span>
<span class="linenos">48</span><span class="c1"># ============================================</span>
<span class="linenos">49</span><span class="c1"># Step 4: Combine shape with background</span>
<span class="linenos">50</span><span class="c1"># ============================================</span>
<span class="linenos">51</span><span class="c1"># Create a mask: where the rotated shape is not black (has color)</span>
<span class="linenos">52</span><span class="c1"># We check if any channel has value &gt; 0</span>
<span class="linenos">53</span><span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">rotated_shape</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="c1"># Apply the rotated shape to canvas where mask is True</span>
<span class="linenos">56</span><span class="c1"># This preserves the background where the shape is transparent (black)</span>
<span class="linenos">57</span><span class="n">canvas</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">=</span> <span class="n">rotated_shape</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>
<span class="linenos">58</span>
<span class="linenos">59</span><span class="c1"># ============================================</span>
<span class="linenos">60</span><span class="c1"># Step 5: Save the result</span>
<span class="linenos">61</span><span class="c1"># ============================================</span>
<span class="linenos">62</span><span class="n">output</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;RGB&#39;</span><span class="p">)</span>
<span class="linenos">63</span><span class="n">output</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;rotation_solution.png&#39;</span><span class="p">)</span>
<span class="linenos">64</span>
<span class="linenos">65</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Rotation complete!&quot;</span><span class="p">)</span>
<span class="linenos">66</span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rotation angle: </span><span class="si">{</span><span class="n">rotation_angle</span><span class="si">}</span><span class="s2"> degrees&quot;</span><span class="p">)</span>
<span class="linenos">67</span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Background color: RGB</span><span class="si">{</span><span class="nb">tuple</span><span class="p">(</span><span class="n">background_color</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">68</span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Shape color: RGB</span><span class="si">{</span><span class="nb">tuple</span><span class="p">(</span><span class="n">shape_color</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">69</span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output saved as: rotation_solution.png&quot;</span><span class="p">)</span>
<span class="linenos">70</span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">How it works:&quot;</span><span class="p">)</span>
<span class="linenos">71</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  1. Canvas filled with background color&quot;</span><span class="p">)</span>
<span class="linenos">72</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  2. Shape drawn on separate black layer&quot;</span><span class="p">)</span>
<span class="linenos">73</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  3. Shape layer rotated with scipy.ndimage.rotate()&quot;</span><span class="p">)</span>
<span class="linenos">74</span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  4. Non-black pixels composited onto canvas&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-center" id="id7">
<a class="reference internal image-reference" href="../../../../../_images/rotation_solution.png"><img alt="Orange rectangle rotated 30 degrees on dark blue background" src="../../../../../_images/rotation_solution.png" style="width: 350px;" />
</a>
<figcaption>
<p><span class="caption-text">The completed rotation tool output: an orange rectangle rotated 30 degrees
on a dark blue background.</span><a class="headerlink" href="#id7" title="Link to this image">#</a></p>
</figcaption>
</figure>
</div>
</details><p><strong>Challenge Extension</strong></p>
<p>Extend your rotation tool to create an animated GIF that shows the shape
rotating through 360 degrees. Use the <code class="docutils literal notranslate"><span class="pre">imageio</span></code> library to save multiple
frames as an animation.</p>
</section>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h2>
<p><strong>Key Takeaways</strong></p>
<ul class="simple">
<li><p>Rotation transforms pixel positions around a center point (pivot)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scipy.ndimage.rotate()</span></code> handles the rotation matrix math automatically</p></li>
<li><p>Positive angles rotate counter-clockwise (mathematical convention)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">reshape</span></code> parameter controls whether output expands to fit content</p></li>
<li><p>Interpolation smooths out pixels that land between grid positions</p></li>
<li><p>Multiple rotations with blending create artistic radial patterns</p></li>
</ul>
<p><strong>Common Pitfalls</strong></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Clipped content</strong>: When using <code class="docutils literal notranslate"><span class="pre">reshape=False</span></code>, parts of your rotated
image may be cut off. Use <code class="docutils literal notranslate"><span class="pre">reshape=True</span></code> if you need to preserve all
content.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Jagged edges</strong>: For smooth rotation edges, use higher interpolation
orders (<code class="docutils literal notranslate"><span class="pre">order=1</span></code> or <code class="docutils literal notranslate"><span class="pre">order=3</span></code>). The default bilinear interpolation
usually provides a good balance.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Unexpected center</strong>: The rotation always happens around the image center,
not the shape center. If your shape is not centered, it will orbit around
the image center rather than spinning in place.</p>
</div>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h2>
<div role="list" class="citation-list">
<div class="citation" id="gonzalez2018" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">Gonzalez2018</a><span class="fn-bracket">]</span></span>
<p>Gonzalez, R. C., &amp; Woods, R. E. (2018). <em>Digital Image Processing</em> (4th ed.). Pearson. ISBN: 978-0-13-335672-4. Chapter 2 covers geometric transformations including rotation.</p>
</div>
<div class="citation" id="foley1996" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>Foley1996<span class="fn-bracket">]</span></span>
<p>Foley, J. D., van Dam, A., Feiner, S. K., &amp; Hughes, J. F. (1996). <em>Computer Graphics: Principles and Practice</em> (2nd ed.). Addison-Wesley. Chapter 5 provides mathematical foundations for 2D transformations.</p>
</div>
<div class="citation" id="scipydocs" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>SciPyDocs<span class="fn-bracket">]</span></span>
<p>SciPy Community. (2024). scipy.ndimage.rotate. <em>SciPy Documentation</em>. <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.rotate.html">https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.rotate.html</a></p>
</div>
<div class="citation" id="numpydocs" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>NumPyDocs<span class="fn-bracket">]</span></span>
<p>Harris, C. R., et al. (2020). Array programming with NumPy. <em>Nature</em>, 585, 357-362. <a class="reference external" href="https://doi.org/10.1038/s41586-020-2649-2">https://doi.org/10.1038/s41586-020-2649-2</a></p>
</div>
<div class="citation" id="szeliski2022" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>Szeliski2022<span class="fn-bracket">]</span></span>
<p>Szeliski, R. (2022). <em>Computer Vision: Algorithms and Applications</em> (2nd ed.). Springer. Chapter 2 covers image transformations and warping.</p>
</div>
<div class="citation" id="burger2016" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>Burger2016<span class="fn-bracket">]</span></span>
<p>Burger, W., &amp; Burge, M. J. (2016). <em>Digital Image Processing: An Algorithmic Introduction Using Java</em> (2nd ed.). Springer. Chapter 22 discusses geometric operations.</p>
</div>
<div class="citation" id="pillowdocs" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>PillowDocs<span class="fn-bracket">]</span></span>
<p>Clark, A., et al. (2024). <em>Pillow (PIL Fork) Documentation</em>. <a class="reference external" href="https://pillow.readthedocs.io/">https://pillow.readthedocs.io/</a></p>
</div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../../../../Module_02_geometry_mathematics/2.3_mathematical_art/2.3.3_harmonograph_simulation/README.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">2.3.3 - Harmonograph Simulation</p>
      </div>
    </a>
    <a class="right-next"
       href="../../3.1.2_affine_transformations/README.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">3.1.2 - Affine Transformations</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-start">Quick Start</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#core-concepts">Core Concepts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-image-rotation">Understanding Image Rotation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-rotation-matrix">The Rotation Matrix</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#center-of-rotation-and-interpolation">Center of Rotation and Interpolation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hands-on-exercises">Hands-On Exercises</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-1-execute-and-explore">Exercise 1: Execute and Explore</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-2-modify-parameters">Exercise 2: Modify Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercise-3-build-your-own-rotation-tool">Exercise 3: Build Your Own Rotation Tool</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../../_sources/content/Module_03_transformations_effects/3.1_geometric_transformations/3.1.1_rotation/rotate/README.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
       Copyright 2025, Kristian Rother &amp; Burak Kagan Yilmazer.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>